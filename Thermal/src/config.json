{
  "model": {
    "latent_channels": 4,
    "base_channels": 128,
    "style_dim": 256,
    "time_dim": 256,
    "num_styles": 4,
    "num_encoder_blocks": 2,
    "num_decoder_blocks": 5
  },
  "loss": {
    "w_style": 5.0,
    "w_mse": 1.0,
    "w_layout": 0.5,
    "patch_size": 5, 
    "num_projections": 64,
    "max_samples": 4096,
    "use_multiscale_swd": true,
    "swd_scales": [1, 3, 5, 7, 15],
    "swd_scale_weights": [1.0, 5.0, 5.0, 5.0, 2.0],
    "edge_boost": 1.5,
    "style_weights": [1.0, 1.0, 1.0, 1.0],
    "use_velocity_reg": true,
    "vel_reg_weight": 0.01
  },
  "training": {
    "batch_size": 128,
    "accumulation_steps": 1,
    "learning_rate": 2e-4,
    "min_learning_rate": 1e-6,
    "weight_decay":5e-5,
    "num_epochs": 1000,
    "warmup_epochs": 12,
    "use_adaptive_loss_norm": true,
    
    "phased_training": {
      "phase_step_size": 50,
      "use_adaptive_phases": true,
      "adaptive_patience": 15,
      "adaptive_factor": 0.5,
      
      "m_mse_start": 2.0,
      "m_mse_end": 0.5,
      
      "m_style_start": 0.1,
      "m_style_end": 5.0,
      
      "layout_ratio": 0.8
    },

    "label_drop_prob": 0.1,
    
    "use_avg_style_for_uncond": true,
    "epsilon": 0.01,
    "epsilon_warmup_epochs": 10,
    "structure_warmup_epochs": 10,
    "ode_integration_steps":1,
    
    "use_amp": true,
    "use_compile": true,
    "use_gradient_checkpointing": false,
    "use_elastic_deform": true,
    "elastic_alpha": 3.0,
    
    "save_interval": 5,
    "eval_interval": 10,
    "full_eval_interval": 50,
    
    "test_image_dir": "/mnt/c/Users/xy/style_data/test",
    "resume_checkpoint": null
  },
  "data": {
    "data_root": "../../data/latents",
    "style_subdirs": ["monet", "photo", "vangogh", "cezanne"],
    "style_prompts": [
      "a Monet-style painting",
      "a photorealistic photograph",
      "a Van Gogh-style painting",
      "a Cezanne-style painting"
    ]
  },
  "checkpoint": {
    "save_dir": "../cross_attn_1-28"
  },
  "inference": {
    "num_steps": 15,
    "temperature_lambda": 0.3,
    "temperature_threshold": 0.5,
    "use_cfg": true,
    "cfg_scale": 4.0,
    "cfg_decay": true,
    "use_source_repulsion": true,
    "repulsion_strength": 1.0
  }
}